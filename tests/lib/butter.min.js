!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.Butter=t():e.Butter=t()}(this,()=>(()=>{"use strict";var r={d:(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)},e={};r.d(e,{default:()=>function(e,t={}){if(e)return this instanceof n?n:new n(e,t);throw"ButterCMS API token not set"}});const j="2.0.0",t={author:"authors",category:"categories",content:"content",feed:"feeds",page:"pages",post:"posts",tag:"tags"};function E(e,t){const{onError:n,onRequest:r,onResponse:o,...a}=t.config,{auth_token:s,test:c,preview:i,...u}=t.params;n&&n(e,{options:a,params:u,type:t.type})}function C(e,t,n){t={auth_token:t};return n.testMode&&(t.test=1,t.preview=1),{...e,...t}}function o(m,g){e=m;const y=`https://api.buttercms.com/v2/${t[e]}/`,q=m.replace(m[0],m[0].toUpperCase()),{cancelRequest:w,controller:b}=function(e){const t=new AbortController;return{cancelRequest:async function(){await t.abort(e+": Request cancelled")},controller:t}}(q);var e;async function n(e=y,t={}){const{apiToken:n,...r}=g,o=new Headers({"Content-Type":"application/json","X-Butter-Client":"JS/"+j});"undefined"==typeof window&&o.append("Accept-Encoding","gzip");var{config:t,headers:a,params:s}=await async function(e,t,n){const{onError:r,onRequest:o,onResponse:a,...s}=n.config;var c,i;return o?({headers:e,options:c,params:i}=await o(e,{cancelRequest:n.cancelRequest,headers:n.headers,options:s,params:n.params,type:n.type}),{config:{...c,onError:r,onRequest:o,onResponse:a},headers:e,params:C(i,t,c)}):{...n,params:C(n.params,t,s)}}(e,n,{cancelRequest:w,config:r,headers:o,params:t,type:m});try{const{cleanup:g,signal:j}=function(e,t,n){const r=setTimeout(()=>{e.abort(t+`: Request timed out after ${n}ms.`)},n);return{cleanup:()=>clearTimeout(r),signal:e.signal}}(b,q,t.timeout),E=await fetch(e+"?"+new URLSearchParams(s),{cache:t.cache,method:"GET",headers:a,signal:j});if(g(),200!==E.status)throw{response:E,config:t,params:s};{var c=E;var i={config:t,params:s,type:m};const{onError:u,onRequest:p,onResponse:l,...f}=i.config,{auth_token:d,test:v,preview:R,...h}=i.params;if(l){const u=c.clone();await l(u,{options:f,params:h,type:i.type})}return await c.json();return await void 0}}catch(e){if(e.response){const j=(await e.response.json())["detail"];return E(j,{config:e.config,params:e.params,type:m}),Promise.reject(new Error(j))}{const j=b.signal.reason&&b.signal.aborted?b.signal.reason:e;return E(j,{config:t,params:s,type:m}),Promise.reject(new Error(j))}}}return{cancelRequest:w,list:async function(e={}){return n(y,e)},retrieve:async function(e,t){return n(y+e+"/",t)},search:async function(e="",t={}){return t.query=e,n(y+"search/",t)}}}const u={Author:function(e={}){var{cancelRequest:e,list:t,retrieve:n}=o("author",e);return{cancelRequest:e,list:t,retrieve:n}},Category:function(e={}){var{cancelRequest:e,list:t,retrieve:n}=o("category",e);return{cancelRequest:e,list:t,retrieve:n}},Content:function(e={}){var{cancelRequest:e,retrieve:t}=o("content",e);return{cancelRequest:e,retrieve:t}},Feed:function(e={}){var{cancelRequest:e,retrieve:t}=o("feed",e);return{cancelRequest:e,retrieve:t}},Page:function(e={}){const{cancelRequest:t,retrieve:r,search:n}=o("page",e);return{cancelRequest:t,list:async(e,t)=>r(e,t),retrieve:async(e,t,n)=>r(e+"/"+t,n),search:n}},Post:function(e={}){var{cancelRequest:e,list:t,retrieve:n,search:r}=o("post",e);return{cancelRequest:e,list:t,retrieve:n,search:r}},Tag:function(e={}){var{cancelRequest:e,list:t,retrieve:n}=o("tag",e);return{cancelRequest:e,list:t,retrieve:n}}};function n(e,t){var n,r,{cache:t="default",onError:o=null,onRequest:a=null,onResponse:s=null,testMode:c=!1,timeout:i=3e3}=t;return{version:j,...(n=u,r={apiToken:e,cache:t,onError:o,onRequest:a,onResponse:s,testMode:c,timeout:i},Object.keys(n).reduce((e,t)=>({...e,[t.toLocaleLowerCase()]:n[t](r)}),{}))}}return e.default})());