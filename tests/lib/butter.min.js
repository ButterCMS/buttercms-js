!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.Butter=t():e.Butter=t()}(this,()=>(()=>{"use strict";var n={d:(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)},e={};n.d(e,{default:()=>function(e,t={}){if(e)return this instanceof r?r:new r(e,t);throw"ButterCMS API token not set"}});const P="2.0.0",s={author:"authors",category:"categories",content:"content",feed:"feeds",page:"pages",post:"posts",tag:"tags"};function x(e,t){const{onError:r,onRequest:n,onResponse:s,...o}=t.config,{auth_token:a,test:c,preview:i,...u}=t.params;r&&r(e,{options:o,params:u,type:t.type})}function C(e,t,r){t={auth_token:t};return r.testMode&&(t.test=1,t.preview=1),{...e,...t}}function o(q,b){t=q;const w=`https://api.buttercms.com/v2/${s[t]}/`,e=q.replace(q[0],q[0].toUpperCase()),{abortOnTimeout:E,applyRequestUrlForErrorMessages:j,cancelRequest:T,cleanup:O,determineFetchError:k,signal:A}=function(t){let s=new AbortController,r="";function o(e){return r+": "+e}function a(){s=null}return{abortOnTimeout:function(e){s.abort(o(`Request timed out after ${e}ms.`))},applyRequestUrlForErrorMessages:function(e){r=t+` (${e})`},cancelRequest:function(){s.abort(o("Request cancelled"))},cleanup:a,controller:s,determineFetchError:function(e,t){var r=s&&s.signal.reason&&s.signal.aborted,n="TimeoutError"===e.name;return r?s.signal.reason:n?o(`Request timed out after ${t}ms.`):(a(),e)},signal:s.signal}}(e);var t;async function r(t=w,r={}){const{apiToken:e,...n}=b,s=new Headers({"Content-Type":"application/json","X-Butter-Client":"JS/"+P}),{config:o,headers:a,params:c}=("undefined"==typeof window&&s.append("Accept-Encoding","gzip"),j(t),await async function(e,t,r){const{onError:n,onRequest:s,onResponse:o,...a}=r.config;var c,i;return s?({headers:e,options:c,params:i}=await s(e,{cancelRequest:r.cancelRequest,headers:r.headers,options:a,params:r.params,type:r.type}),{config:{...c,onError:n,onRequest:s,onResponse:o},headers:e,params:C(i,t,c)}):{...r,params:C(r.params,t,a)}}(t,e,{cancelRequest:T,config:n,headers:s,params:r,type:q}));try{var i=AbortSignal.timeout?AbortSignal.timeout(o.timeout):setTimeout(()=>E(o.timeout),o.timeout),u=await fetch(t+"?"+new URLSearchParams(c),{cache:o.cache,method:"GET",headers:a,signal:AbortSignal.timeout?AbortSignal.any([A,i]):A});if(AbortSignal.timeout||clearTimeout(i),O(),200!==u.status)throw{response:u,config:o,params:c};{var p=u;var l={config:o,params:c,type:q,requestHeaders:s};const{onError:f,onRequest:m,onResponse:d,...h}=l.config,{auth_token:g,test:R,preview:v,...y}=l.params;if(d){const f=p.clone();await d(f,{options:h,params:y,type:l.type})}return await{data:await p.json(),headers:Object.fromEntries(p.headers.entries()),status:p.status,statusText:p.statusText,config:{url:p.url,method:"get",headers:Object.fromEntries(l.requestHeaders.entries()),transformRequest:m?[m]:[],transformResponse:d?[d]:[],timeout:l.config.timeout}};return await void 0}}catch(e){return e.response?(r=await e.response.json(),t=Object.fromEntries(Object.entries(e.params).filter(([e])=>"auth_token"!==e)),(i=new URL(e.response.url)).searchParams.delete("auth_token"),x(r,u={data:r,headers:e.response.headers,status:e.response.status,statusText:e.response.statusText,config:e.config,params:t,type:q,url:i}),Promise.reject(new Error(`${p=r,l=Object.keys(p),1<l.length?`Errors caught in [${l.join(", ")}]: see cause for details`:`[${l[0]}]: `+p[l[0]]} (${e.response.status})`,{cause:u}))):(x(t=k(e,o.timeout),{config:o,params:c,type:q}),O(),Promise.reject(new Error(t)))}}return{cancelRequest:T,list:async function(e={}){return r(w,e)},retrieve:async function(e,t){return r(w+e+"/",t)},search:async function(e="",t={}){return t.query=e,r(w+"search/",t)}}}const u={Author:function(e={}){var{cancelRequest:e,list:t,retrieve:r}=o("author",e);return{cancelRequest:e,list:t,retrieve:r}},Category:function(e={}){var{cancelRequest:e,list:t,retrieve:r}=o("category",e);return{cancelRequest:e,list:t,retrieve:r}},Content:function(e={}){var{cancelRequest:e,retrieve:t}=o("content",e);return{cancelRequest:e,retrieve:t}},Feed:function(e={}){var{cancelRequest:e,retrieve:t}=o("feed",e);return{cancelRequest:e,retrieve:t}},Page:function(e={}){const{cancelRequest:t,retrieve:n,search:r}=o("page",e);return{cancelRequest:t,list:async(e,t)=>n(e,t),retrieve:async(e,t,r)=>n(e+"/"+t,r),search:r}},Post:function(e={}){var{cancelRequest:e,list:t,retrieve:r,search:n}=o("post",e);return{cancelRequest:e,list:t,retrieve:r,search:n}},Tag:function(e={}){var{cancelRequest:e,list:t,retrieve:r}=o("tag",e);return{cancelRequest:e,list:t,retrieve:r}}};function r(e,t){var r,n,{cache:t="default",onError:s=null,onRequest:o=null,onResponse:a=null,testMode:c=!1,timeout:i=3e3}=t;return{version:P,...(r=u,n={apiToken:e,cache:t,onError:s,onRequest:o,onResponse:a,testMode:c,timeout:i},Object.keys(r).reduce((e,t)=>({...e,[t.toLocaleLowerCase()]:r[t](n)}),{}))}}return e.default})());